#parse("/velocity/layout.vm")
#@mainLayout()
<h1>Lessons</h1>
<div id="lessons-vue" v-cloak>
    <div class="refine-container">
        <div id="filter-lessons">
            <h2>Filter</h2>
            <input v-model="includeBeginner" type="checkbox" id="beginner" value="Beginner" @click="alert">
            <label for="beginner">Beginner</label><br>
            <input v-model="includeIntermediate" type="checkbox" id="intermediate" value="Intermediate" v-on:click="alert">
            <label for="intermediate">Intermediate</label><br>
            <input v-model="includeAdvanced" type="checkbox" id="advanced" value="Advanced">
            <label for="advanced">Advanced</label><br>
            <input v-model="message" placeholder="Write something">
            <p>Message is: {{ message }}</p>
            <div v-if="isAdmin" id="addNewLesson">
                <button @click="alertButton">Add new lesson</button>
            </div>
        </div>
    </div>
    <ul id="lesson-list" class="block-list">
        <li v-for="lesson in lessons" class="block">
            <a :href="`/lessons/${lesson.id}`">
                <div class="block__title"> {{ lesson.title }}</div>
                <div class="block__description"> {{ lesson.description }}</div>
            </a>
        </li>
    </ul>
</div>
<script>
    new Vue({
        el: '#lessons-vue',
        data: {
            lessons: [],
            includeBeginner: true,
            includeIntermediate: true,
            includeAdvanced: true,
            isAdmin: false,
            message: "python",
        },
        methods: {
            alert: function () {
                alert("clicked");
            },
            alertButton: function () {
                alert("clicked");
            }
        },
        created: function () {
            axios.get("/api/lessons").then(response => {
                this.lessons = response.data;
            });
            axios.get("/api/user").then(response => {
                this.isAdmin = response.data.admin;
            });
        }
    });
</script>
#end
